<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zync - Event Management</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
    }

    .theme-bg {
      background: linear-gradient(135deg, #facc15 0%, #f97316 50%, #ef4444 100%);
      min-height: 100vh;
    }

    /* Tab Navigation Styles */
    .tab-navigation {
      position: fixed;
      top: 1rem;
      right: 1rem;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(12px);
      border-radius: 1rem;
      padding: 0.25rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      z-index: 100;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .tab-button {
      padding: 0.5rem 1rem;
      border-radius: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      color: #374151;
      background: transparent;
      border: none;
      white-space: nowrap;
    }

    .tab-button:hover {
      background: rgba(249, 115, 22, 0.1);
      color: #f97316;
    }

    .tab-button.active {
      background: #f97316;
      color: white;
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
      transform: scale(1.05);
    }

    .user-menu {
      position: relative;
    }

    .user-button {
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 0.75rem;
      background: #f97316;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      border: none;
      color: white;
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
    }

    .user-button:hover {
      background: #ea580c;
      transform: scale(1.05);
    }

    .user-dropdown {
      position: absolute;
      top: 3rem;
      right: 0;
      background: white;
      border-radius: 0.75rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      padding: 0.5rem;
      min-width: 120px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.2s ease;
      z-index: 101;
    }

    .user-dropdown.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .logout-button {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0.75rem;
      color: #dc2626;
      background: transparent;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 500;
    }

    .logout-button:hover {
      background: #fef2f2;
    }

    /* Main Content Styles */
    .main-content {
      padding-top: 3rem;
      padding-left: 1rem;
      padding-right: 1rem;
      padding-bottom: 2rem;
    }

    .content-container {
      max-width: 112rem;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(20px);
      border-radius: 1.5rem;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      min-height: auto;
	  margin-top: 0;
      position: relative;
      overflow: hidden;
    }

    /* Tab Content Styles */
    .tab-content {
      position: relative;
      padding: 2rem;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: visible;
    }

    .tab-content.about {
      opacity: 0;
      transform: translateX(-100%);
      pointer-events: none;
    }

    .tab-content.about.active {
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
    }

    .tab-content.register {
      opacity: 0;
      transform: translateX(100%);
      pointer-events: none;
    }

    .tab-content.register.active {
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
    }

    /* Event Card Styles */
    .event-card {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
      overflow: hidden;
      cursor: pointer;
    }

    .event-card:hover {
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    .event-card-header {
      padding: 1.5rem;
      transition: all 0.2s ease;
    }

    .event-card:hover .event-card-header {
      background: rgba(249, 115, 22, 0.05);
    }

    .event-card-content {
      max-height: 0;
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      opacity: 0;
    }

    .event-card.expanded .event-card-content {
      max-height: 500px;
      opacity: 1;
    }

    .event-status {
      background: #fef3c7;
      color: #d97706;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .event-status.almost-full {
      background: #fee2e2;
      color: #dc2626;
    }

    .event-status.filling-fast {
      background: #fef3c7;
      color: #d97706;
    }

    .event-status.available {
      background: #dcfce7;
      color: #16a34a;
    }

    .chevron-icon {
      transition: transform 0.2s ease;
    }

    .event-card.expanded .chevron-icon {
      transform: rotate(90deg);
    }

    .register-button {
      background: linear-gradient(135deg, #f97316, #ef4444);
      color: white;
      border: none;
      padding: 0.75rem 2rem;
      border-radius: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 4px 15px rgba(249, 115, 22, 0.3);
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .register-button:hover {
      background: linear-gradient(135deg, #ea580c, #dc2626);
      box-shadow: 0 6px 20px rgba(249, 115, 22, 0.4);
      transform: translateY(-1px);
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      padding: 1rem;
      /* allow page scrolling when modal content is taller than viewport */
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    .modal-overlay.show {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      max-width: 28rem;
      width: 100%;
      /* Make modal fit available viewport height and allow internal scrolling */
      max-height: calc(100vh - 4rem);
      overflow-y: auto;
      box-sizing: border-box;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
      transform: scale(0.9) translateY(20px);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .modal-overlay.show .modal-content {
      transform: scale(1) translateY(0);
    }

    .form-input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid #d1d5db;
      border-radius: 0.75rem;
      font-size: 1rem;
      transition: all 0.2s ease;
      background: white;
    }

    .form-input:focus {
      outline: none;
      border-color: #f97316;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
    }

    .button-group {
      display: flex;
      gap: 0.75rem;
      margin-top: 1.5rem;
    }

    .button-secondary {
      flex: 1;
      padding: 0.75rem 1.5rem;
      border: 1px solid #d1d5db;
      background: white;
      color: #374151;
      border-radius: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .button-secondary:hover {
      background: #f9fafb;
    }

    .button-primary {
      flex: 1;
      padding: 0.75rem 1.5rem;
      background: linear-gradient(135deg, #f97316, #ef4444);
      color: white;
      border: none;
      border-radius: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 4px 15px rgba(249, 115, 22, 0.3);
    }

    .button-primary:hover {
      background: linear-gradient(135deg, #ea580c, #dc2626);
      box-shadow: 0 6px 20px rgba(249, 115, 22, 0.4);
    }

    /* Category Styles */
    .category-section {
      margin-bottom: 3rem;
    }

    .category-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .category-icon {
      padding: 0.5rem;
      border-radius: 0.75rem;
      border: 2px solid;
    }

    .category-icon.cultural {
      background: #faf5ff;
      border-color: #d8b4fe;
      color: #7c3aed;
    }

    .category-icon.sports {
      background: #f0fdf4;
      border-color: #bbf7d0;
      color: #16a34a;
    }

    .category-icon.tech {
      background: #eff6ff;
      border-color: #93c5fd;
      color: #2563eb;
    }

    .category-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1f2937;
    }

    .category-divider {
      flex: 1;
      height: 1px;
      background: linear-gradient(to right, #d1d5db, transparent);
      margin-left: 1rem;
    }

    /* About Page Styles */
    .logo-placeholder {
      display: inline-block;
      background: white;
      border-radius: 1.5rem;
      padding: 2rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      border: 1px solid #e5e7eb;
      transition: all 0.3s ease;
    }

    .logo-placeholder:hover {
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    }

    .logo-container {
      width: 12rem;
      height: 12rem;
      background: linear-gradient(135deg, #fed7aa, #fecaca);
      border-radius: 1rem;
      border: 2px dashed #fb923c;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .logo-placeholder:hover .logo-container {
      border-color: #f97316;
    }

    .info-card {
      background: white;
      border-radius: 1rem;
      padding: 1.5rem;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }

    .info-card:hover {
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    .cta-section {
      background: linear-gradient(135deg, #f97316, #ef4444);
      border-radius: 1rem;
      padding: 2rem;
      text-align: center;
      color: white;
    }

    .cta-button {
      background: white;
      color: #f97316;
      border: none;
      padding: 0.75rem 2rem;
      border-radius: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .cta-button:hover {
      background: #fef7f0;
      transform: translateX(4px);
    }

    /* New Styles for Added Features */
    .search-container {
      background: white;
      border-radius: 1rem;
      padding: 1rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .search-input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid #d1d5db;
      border-radius: 0.75rem;
      font-size: 1rem;
      transition: all 0.2s ease;
      background: white;
    }

    .search-input:focus {
      outline: none;
      border-color: #f97316;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
    }

    .filter-buttons {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }

    .filter-button {
      padding: 0.5rem 1rem;
      border-radius: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      background: #f3f4f6;
      border: 1px solid #e5e7eb;
      color: #374151;
    }

    .filter-button:hover, .filter-button.active {
      background: #f97316;
      color: white;
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
    }

    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: white;
      border-radius: 0.75rem;
      padding: 1rem 1.5rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      gap: 0.75rem;
      z-index: 1000;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }

    .toast.success {
      border-left: 4px solid #10b981;
    }

    .toast.error {
      border-left: 4px solid #ef4444;
    }

    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .form-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .required-indicator {
      color: #ef4444;
      font-size: 1.2rem;
    }

    .social-share {
      display: flex;
      gap: 0.75rem;
      margin-top: 1.5rem;
    }

    .social-button {
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f3f4f6;
      color: #374151;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .social-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .social-button.facebook:hover { background: #1877f2; color: white; }
    .social-button.twitter:hover { background: #1da1f2; color: white; }
    .social-button.linkedin:hover { background: #0a66c2; color: white; }
    .social-button.whatsapp:hover { background: #25d366; color: white; }

    .faq-item {
      border-bottom: 1px solid #e5e7eb;
      padding: 1.5rem 0;
    }

    .faq-question {
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      font-weight: 600;
      color: #1f2937;
    }

    .faq-answer {
      margin-top: 1rem;
      color: #4b5563;
      line-height: 1.6;
    }

    .contact-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .contact-card {
      background: white;
      border-radius: 1rem;
      padding: 1.5rem;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }

    .contact-card:hover {
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .tab-navigation {
        top: 0.5rem;
        right: 0.5rem;
        left: 0.5rem;
        justify-content: center;
      }

      .main-content {
        padding-top: 6rem;
        padding-left: 0.5rem;
        padding-right: 0.5rem;
      }

      .tab-content {
        padding: 1rem;
      }

      .content-container {
        border-radius: 1rem;
      }

      .modal-content {
        margin: 1rem;
        padding: 1.5rem;
        /* ensure mobile modal also respects viewport height */
        max-height: calc(100vh - 2.5rem);
      }

      .toast {
        right: 1rem;
        left: 1rem;
        bottom: 1rem;
      }
      
    }
  </style>
</head>

<body class="theme-bg">
  <!-- Header -->
  <header class="p-4 flex justify-between items-center">
    <div class="flex items-center">
      <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-lg">
        <i data-lucide="calendar" class="w-6 h-6 text-orange-600"></i>
      </div>
      <h1 class="ml-3 text-2xl font-bold text-white">Zync</h1>
    </div>
    
    <!-- Navigation -->
    <div class="tab-navigation">
      <button id="tab-about" class="tab-button active" onclick="showTab('about')">About</button>
      <button id="tab-register" class="tab-button" onclick="showTab('register')">Register Now</button>
      
      <!-- User Menu -->
      <div class="user-menu">
        <button class="user-button" onclick="toggleUserMenu()">
          <i data-lucide="user" class="w-5 h-5"></i>
        </button>
        <div id="user-dropdown" class="user-dropdown">
          <button class="logout-button" onclick="logout()">
            <i data-lucide="log-out" class="w-4 h-4"></i>
            Logout
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Toast Notification -->
  <div id="toast" class="toast">
    <i data-lucide="check-circle" class="w-6 h-6 text-green-500"></i>
    <div id="toast-message">Registration successful!</div>
  </div>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-container">
      
      <!-- About Tab -->
      <div id="content-about" class="tab-content about active">
        <div class="mb-8">
          <h2 class="text-3xl font-bold text-gray-800 mb-2">Volksfiesta</h2>
          <p class="text-gray-600">Learn more about Volksfiesta</p>
        </div>
        
        <div class="max-w-4xl mx-auto space-y-8">
          <!-- Event Logo Placeholder -->
          <div class="text-center">
            <div class="logo-placeholder">
              <div class="logo-container">
                <div class="text-center">
                  <i data-lucide="calendar" class="w-16 h-16 text-orange-400 mx-auto mb-3"></i>
                  <p class="text-orange-600 font-semibold text-lg">Event Logo</p>
                  <p class="text-orange-500 text-sm">Coming Soon</p>
                </div>
              </div>
            </div>
          </div>

          <!-- About Content -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="info-card">
              <div class="flex items-center gap-3 mb-4">
                <div class="p-2 rounded-xl bg-blue-50 border-2 border-blue-200">
                  <i data-lucide="users" class="w-6 h-6 text-blue-600"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800">About Volksfiesta</h3>
              </div>
              <p class="text-gray-600 leading-relaxed">
                **Type summary here**
              </p>
            </div>

            <div class="info-card">
              <div class="flex items-center gap-3 mb-4">
                <div class="p-2 rounded-xl bg-green-50 border-2 border-green-200">
                  <i data-lucide="trophy" class="w-6 h-6 text-green-600"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800">Event Categories</h3>
              </div>
              <div class="space-y-3">
                <div class="flex items-center gap-3">
                  <div class="p-1.5 rounded-lg bg-purple-50 border border-purple-200">
                    <i data-lucide="palette" class="w-4 h-4 text-purple-600"></i>
                  </div>
                  <span class="font-medium text-gray-700">Cultural</span>
                </div>
                <div class="flex items-center gap-3">
                  <div class="p-1.5 rounded-lg bg-green-50 border border-green-200">
                    <i data-lucide="trophy" class="w-4 h-4 text-green-600"></i>
                  </div>
                  <span class="font-medium text-gray-700">Sports</span>
                </div>
              </div>
            </div>

            <div class="info-card">
              <div class="flex items-center gap-3 mb-4">
                <div class="p-2 rounded-xl bg-purple-50 border-2 border-purple-200">
                  <i data-lucide="calendar" class="w-6 h-6 text-purple-600"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800">How It Works</h3>
              </div>
              <div class="space-y-3 text-gray-600">
                <div class="flex items-start gap-3">
                  <div class="w-6 h-6 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5">1</div>
                  <p>Browse events by category</p>
                </div>
                <div class="flex items-start gap-3">
                  <div class="w-6 h-6 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5">2</div>
                  <p>Click "Register Now" for events you're interested in</p>
                </div>
                <div class="flex items-start gap-3">
                  <div class="w-6 h-6 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5">3</div>
                  <p>Receive confirmation and event details</p>
                </div>
              </div>
            </div>

            <div class="info-card">
              <div class="flex items-center gap-3 mb-4">
                <div class="p-2 rounded-xl bg-red-50 border-2 border-red-200">
                  <i data-lucide="map-pin" class="w-6 h-6 text-red-600"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800">Contact & Support</h3>
              </div>
              <div class="space-y-2 text-gray-600">
                <p>Need help with registration?</p>
                <p class="font-semibold text-orange-600">support@zync.school</p>
                <p class="text-sm">We're here to help you make the most of your event experience!</p>
              </div>
            </div>
          </div>

          <!-- FAQ Section -->
          <div class="info-card">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Frequently Asked Questions</h3>
            <div class="faq-list">
              <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                  How do I register for an event?
                  <i data-lucide="chevron-down" class="w-5 h-5 text-gray-400"></i>
                </div>
                <div class="faq-answer">
                  Simply navigate to the "Register Now" tab, browse through the available events, and click on the "Register Now" button for any event you're interested in. Fill out the registration form with your details and submit.
                </div>
              </div>
              <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                  Can I cancel my registration?
                  <i data-lucide="chevron-down" class="w-5 h-5 text-gray-400"></i>
                </div>
                <div class="faq-answer">
                  Yes, you can cancel your registration up to 48 hours before the event starts. Please contact our support team at support@zync.school to request a cancellation.
                </div>
              </div>
              <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                  Is there a registration fee?
                  <i data-lucide="chevron-down" class="w-5 h-5 text-gray-400"></i>
                </div>
                <div class="faq-answer">
                  Most events are free for students. However, some special workshops or competitions may have a nominal fee which will be clearly mentioned in the event details.
                </div>
              </div>
              <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                  How will I receive event updates?
                  <i data-lucide="chevron-down" class="w-5 h-5 text-gray-400"></i>
                </div>
                <div class="faq-answer">
                  After registration, you'll receive a confirmation email with event details. We'll also send reminders and updates via email as the event approaches.
                </div>
              </div>
            </div>
          </div>

          <!-- Organizer Contact Information -->
          <div class="info-card">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Event Organizers</h3>
            <div class="contact-info">
              <div class="contact-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center">
                    <i data-lucide="user" class="w-5 h-5 text-orange-600"></i>
                  </div>
                  <div>
                    <h4 class="font-semibold text-gray-800">Sarah Johnson</h4>
                    <p class="text-sm text-gray-600">Cultural Events Coordinator</p>
                  </div>
                </div>
                <div class="space-y-1 text-sm">
                  <div class="flex items-center gap-2 text-gray-600">
                    <i data-lucide="mail" class="w-4 h-4"></i>
                    <span>sarah@zync.school</span>
                  </div>
                  <div class="flex items-center gap-2 text-gray-600">
                    <i data-lucide="phone" class="w-4 h-4"></i>
                    <span>+1 (555) 123-4567</span>
                  </div>
                </div>
              </div>
              
              <div class="contact-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                    <i data-lucide="user" class="w-5 h-5 text-green-600"></i>
                  </div>
                  <div>
                    <h4 class="font-semibold text-gray-800">Michael Chen</h4>
                    <p class="text-sm text-gray-600">Tech Events Manager</p>
                  </div>
                </div>
                <div class="space-y-1 text-sm">
                  <div class="flex items-center gap-2 text-gray-600">
                    <i data-lucide="mail" class="w-4 h-4"></i>
                    <span>michael@zync.school</span>
                  </div>
                  <div class="flex items-center gap-2 text-gray-600">
                    <i data-lucide="phone" class="w-4 h-4"></i>
                    <span>+1 (555) 987-6543</span>
                  </div>
                </div>
              </div>
              
              <div class="contact-card">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                    <i data-lucide="user" class="w-5 h-5 text-blue-600"></i>
                  </div>
                  <div>
                    <h4 class="font-semibold text-gray-800">Emily Rodriguez</h4>
                    <p class="text-sm text-gray-600">Sports Events Director</p>
                  </div>
                </div>
                <div class="space-y-1 text-sm">
                  <div class="flex items-center gap-2 text-gray-600">
                    <i data-lucide="mail" class="w-4 h-4"></i>
                    <span>emily@zync.school</span>
                  </div>
                  <div class="flex items-center gap-2 text-gray-600">
                    <i data-lucide="phone" class="w-4 h-4"></i>
                    <span>+1 (555) 456-7890</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Call to Action -->
          <div class="cta-section">
            <h3 class="text-2xl font-bold mb-3">Ready to Get Started?</h3>
            <p class="mb-6 text-orange-100">Join exciting events and connect with your school community</p>
            <button class="cta-button" onclick="showTab('register')">
              Start Registering
              <i data-lucide="chevron-right" class="w-4 h-4"></i>
            </button>
            
            <!-- Social Sharing -->
            
          </div>
        </div>
      </div>

      <!-- Register Tab -->
      <div id="content-register" class="tab-content register">
        <div class="mb-8">
          <h2 class="text-3xl font-bold text-gray-800 mb-2">Register for Events</h2>
          <p class="text-gray-600">Join exciting events and competitions</p>
        </div>
        
        <!-- Search and Filter -->
        <div class="search-container">
          <input 
            type="text" 
            id="search-input" 
            class="search-input" 
            placeholder="Search events by name, description, or venue..."
            oninput="filterEvents()"
          />
          <div class="filter-buttons">
            <button class="filter-button active" onclick="setFilter('all')">All Events</button>
            <button class="filter-button" onclick="setFilter('cultural')">Cultural</button>
            <button class="filter-button" onclick="setFilter('sports')">Sports</button>
          </div>
        </div>
        
        <div id="events-container" class="space-y-8">
          <!-- Events will be populated by JavaScript -->
        </div>

        <!-- Loading State -->
        <div id="events-loading" class="text-center py-12 hidden">
          <div class="inline-flex items-center justify-center gap-3">
            <div class="w-6 h-6 border-2 border-t-orange-600 border-r-orange-400 border-b-orange-300 border-l-orange-500 rounded-full animate-spin"></div>
            <span class="text-gray-600">Loading events...</span>
          </div>
        </div>

        <!-- No Results Message -->
        <div id="no-events-message" class="text-center py-12 hidden">
          <i data-lucide="calendar-x" class="w-16 h-16 text-gray-300 mx-auto mb-4"></i>
          <h3 class="text-xl font-semibold text-gray-600 mb-2">No events found</h3>
          <p class="text-gray-500">Try adjusting your search or filter criteria</p>
        </div>
      </div>
    </div>
  </main>

  <!-- Registration Modal -->
  <div id="registration-modal" class="modal-overlay">
    <div class="modal-content">
      <div class="text-center mb-6">
        <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i data-lucide="calendar" class="w-8 h-8 text-orange-600"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-2">Register for Event</h3>
        <p id="modal-event-name" class="text-gray-600"></p>
      </div>
      
      <form id="registration-form">
        <input type="hidden" id="reg-id" name="reg_id" />
        <div class="space-y-4">
          <div>
            <label for="student-name" class="form-label">
              <span>Full Name</span>
              <span class="required-indicator">*</span>
            </label>
            <input
              type="text"
              id="student-name"
              name="name"
              required
              class="form-input"
              placeholder="Enter your full name"
              maxlength="300"
            />
          </div>
          
          <div>
            <label for="student-school" class="form-label">
              <span>School</span>
              <span class="required-indicator">*</span>
            </label>
            <input
              type="text"
              id="student-school"
              name="school"
              required
              class="form-input"
              placeholder="Enter your school name"
              maxlength="300"
            />
          </div>

          <div>
            <label for="student-dob" class="form-label">
              <span>Date of Birth</span>
              <span class="required-indicator">*</span>
            </label>
            <input
              type="date"
              id="student-dob"
              name="dob"
              required
              class="form-input"
              placeholder="YYYY-MM-DD"
            />
          </div>

          <div>
            <label for="student-grade" class="form-label">
              <span>Grade</span>
              <span class="required-indicator">*</span>
            </label>
            <input
              type="text"
              id="student-grade"
              name="grade"
              required
              class="form-input"
              placeholder="Enter your grade (e.g. 10, 11, A-level)"
              maxlength="50"
            />
          </div>

          <div>
            <label for="student-contact" class="form-label">
              <span>Contact Details</span>
              <span class="required-indicator">*</span>
            </label>
            <input
              type="tel"
              id="student-contact"
              name="contact_details"
              required
              class="form-input"
              placeholder="Phone / alternate contact (max 50 chars)"
              maxlength="50"
            />
          </div>
        </div>
        
        <div class="button-group">
          <button type="button" class="button-secondary" onclick="closeModal()">
            Cancel
          </button>
          <button type="submit" class="button-primary" id="submit-button">
            Register
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Result Modal (success / failure) -->
  <div id="result-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-content text-center">
      <div id="result-icon" class="w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center"></div>
      <h3 id="result-title" class="text-xl font-bold mb-2"></h3>
      <p id="result-message" class="text-gray-600 mb-4"></p>
      <div class="button-group">
        <button type="button" class="button-secondary" onclick="closeResultModal()">Close</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="text-center text-white/80 py-4">
    <p>&copy; 2025 Zync. All rights reserved.</p>
  </footer>

  <script>
    // Initialize Lucide icons
    const about_container = document.getElementById('content-about');
    const register_container = document.getElementById('content-register');
    lucide.createIcons();

    // Data
    const categories = [
      { 
        id: 1, 
        name: 'Cultural', 
        icon: 'palette', 
        color: 'text-purple-600',
        bgColor: 'bg-purple-50 border-purple-200',
        iconClass: 'cultural'
      },
      { 
        id: 2, 
        name: 'Sports', 
        icon: 'trophy', 
        color: 'text-green-600',
        bgColor: 'bg-green-50 border-green-200',
        iconClass: 'sports'
      },
    ];

    // events will be populated from the API
    let events = [];

    // Fetch events from API and populate `events`. Alert on failure.
    async function fetchEvents() {
      const container = document.getElementById('events-container');
      const loadingElement = document.getElementById('events-loading');
      const noEventsElement = document.getElementById('no-events-message');

      // Show loading UI
      container.innerHTML = '';
      loadingElement.classList.remove('hidden');
      noEventsElement.classList.add('hidden');
      about_container.classList.add('hidden');
      register_container.classList.remove('hidden');

      try {
        const resp = await fetch('admin/api/event/get');
        if (!resp.ok) throw new Error('Network response was not ok');
        const result = await resp.json();

        // API may return either an array of rows or an object like { code, data, message }
        const rows = Array.isArray(result) ? result : (Array.isArray(result.data) ? result.data : []);

        // Map server rows to frontend event shape.
        // Accepts either row arrays (like your example) or objects.
        events = (rows || []).map(row => {
          // helper to resolve category id from a string type (e.g. 'sports'|'cultural')
          const resolveCategoryId = (typeStr, fallback = 1) => {
            if (!typeStr) return fallback;
            const t = String(typeStr).toLowerCase();
            const matched = categories.find(c => c.name.toLowerCase() === t);
            return matched ? matched.id : fallback;
          };

          if (Array.isArray(row)) {
            const typeStr = row[1];
            return {
              id: row[0],
              type: typeStr,
              core_event: row[1] ?? null,
              name: row[2],
              description: row[3] || '',
              date: row[4] ? String(row[4]) : '',
              venue: row[5] || '',
              maxParticipants: row[6] || 0,
              currentParticipants: row[7] || 0,
              categoryId: resolveCategoryId(row[8] ?? typeStr, 1)
            };
          } else {
            const typeStr = row.type ?? row.category ?? '';
            return {
              id: row.id ?? row.event_id ?? row.eventId,
              type: typeStr,
              // core_event should come from explicit core_event/coreEvent or fallback to type
              core_event: row.core_event ?? row.coreEvent ?? typeStr ?? null,
              name: row.name ?? row.event_name ?? row.eventName ?? '',
              description: row.description ?? row.desc ?? row.note ?? '',
              date: row.date ?? row.ev_date ?? (row[4] ? String(row[4]) : ''),
              venue: row.venue ?? row.location ?? '',
              maxParticipants: row.maxParticipants ?? row.max_participants ?? 0,
              currentParticipants: row.currentParticipants ?? row.current_participants ?? 0,
              categoryId: resolveCategoryId(typeStr, row.categoryId ?? row.category_id ?? 1)
            };
          }
        });

        // Render results
        loadingElement.classList.add('hidden');
        if (!events.length) {
          noEventsElement.classList.remove('hidden');
          return;
        }
        renderEvents();
      } catch (err) {
        loadingElement.classList.add('hidden');
        alert('Failed to fetch events. Please try again later.');
        console.error('fetchEvents error:', err);
      }
     }
 
    // --- Helpers for filters, cookies and rendering (was missing) ---
    let registeredEventIds = new Set();
 
    function readRegisteredCookie() {
      try {
        const c = document.cookie.split('; ').find(row => row.startsWith('zync_registered='));
        if (!c) return [];
        const v = decodeURIComponent(c.split('=')[1] || '[]');
        const arr = JSON.parse(v || '[]');
        return Array.isArray(arr) ? arr : [];
      } catch (err) {
        return [];
      }
    }
 
    function loadRegisteredFromCookie() {
      registeredEventIds = new Set(readRegisteredCookie().map(String));
    }
 
    function setFilter(filter) {
      currentFilter = filter;
      document.querySelectorAll('.filter-button').forEach(btn => btn.classList.toggle('active', btn.textContent.trim().toLowerCase() === (filter === 'all' ? 'all events' : filter)));
      renderEvents();
    }
 
    function filterEvents() {
      const input = document.getElementById('search-input');
      searchQuery = input ? input.value.trim().toLowerCase() : '';
      renderEvents();
    }
 
    // Render events into UI. Uses existing globals: events, categories, currentFilter, searchQuery
    function renderEvents() {
      const container = document.getElementById('events-container');
      const loadingElement = document.getElementById('events-loading');
      const noEventsElement = document.getElementById('no-events-message');
      if (!container) return;
 
      // Ensure registered list is loaded
      loadRegisteredFromCookie();
 
      container.innerHTML = '';
      loadingElement.classList.add('hidden');
      noEventsElement.classList.add('hidden');
 
      const q = searchQuery || '';
      const filtered = events.filter(ev => {
        const matchesSearch = q === '' || (ev.name && ev.name.toLowerCase().includes(q)) || (ev.description && ev.description.toLowerCase().includes(q)) || (ev.venue && ev.venue.toLowerCase().includes(q));
        const cat = getCategoryById(ev.categoryId);
        const matchesCategory = currentFilter === 'all' || (cat && cat.name && cat.name.toLowerCase() === currentFilter);
        return matchesSearch && matchesCategory;
      });
 
      if (!filtered.length) {
        noEventsElement.classList.remove('hidden');
        return;
      }
 
      // Group by category id
      const byCat = {};
      filtered.forEach(ev => {
        const cid = ev.categoryId || 0;
        byCat[cid] = byCat[cid] || [];
        byCat[cid].push(ev);
      });
 
      Object.keys(byCat).forEach(cid => {
        const category = getCategoryById(parseInt(cid, 10)) || { name: 'Other', icon: 'calendar', iconClass: '' };
        const section = document.createElement('div');
        section.className = 'category-section';
        section.innerHTML = `
          <div class="category-header">
            <div class="category-icon ${category.iconClass}">
              <i data-lucide="${category.icon}" class="w-6 h-6"></i>
            </div>
            <h3 class="category-title">${category.name}</h3>
            <div class="category-divider"></div>
          </div>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"></div>
        `;
 
        const grid = section.querySelector('div.grid');
        byCat[cid].forEach(ev => {
          const isRegistered = registeredEventIds.has(String(ev.id));
          const card = document.createElement('div');
          card.id = `event-${ev.id}`;
          card.className = 'event-card';
          card.innerHTML = `
            <div class="event-card-header">
              <div class="flex-1">
                <h4 class="text-xl font-bold text-gray-800 mb-2">${ev.name || 'Untitled event'}</h4>
                <p class="text-gray-500 text-sm mb-3"><strong>Core Event:</strong> ${ev.core_event || category.name}</p>
                ${ev.description ? `<p class="text-gray-600 text-sm mb-3">${ev.description}</p>` : ''}
              </div>
              <div class="space-y-2 mb-4">
                <div class="flex items-center gap-2 text-gray-600">
                  <i data-lucide="calendar" class="w-4 h-4"></i>
                  <span class="text-sm">${formatDate(ev.date)}</span>
                </div>
                ${ev.venue ? `<div class="flex items-center gap-2 text-gray-600"><i data-lucide="map-pin" class="w-4 h-4"></i><span class="text-sm">${ev.venue}</span></div>` : ''}
              </div>
              ${isRegistered ? `<button class="button-secondary" disabled>Registered</button>` : `<button class="register-button" onclick="openRegistrationModal(${ev.id})">Register Now <i data-lucide="chevron-right" class="w-4 h-4"></i></button>`}
            </div>
          `;
          grid.appendChild(card);
        });
 
        container.appendChild(section);
      });
 
      lucide.createIcons();
    }
    
     let expandedEvent = null;
     let selectedEvent = null;
     let currentFilter = 'all';
     let searchQuery = '';
 
     // Utility functions
     function formatDate(dateStr) {
       if (!dateStr) return 'Date TBA';
       const date = new Date(dateStr);
       return isNaN(date.getTime()) ? dateStr : date.toLocaleDateString('en-US', { 
         year: 'numeric', 
         month: 'short', 
         day: 'numeric' 
       });
     }
 
     function getCategoryById(id) {
       return categories.find(cat => cat.id === id);
     }
 
     function getAvailabilityStatus(current = 0, max = 0) {
       if (max === 0) return { text: 'Open', className: 'available' };
       const percentage = (current / max) * 100;
       if (percentage >= 90) return { text: 'Almost Full', className: 'almost-full' };
       if (percentage >= 70) return { text: 'Filling Fast', className: 'filling-fast' };
       return { text: 'Available', className: 'available' };
     }
 
     // Toast notification
     function showToast(message, type = 'success') {
       const toast = document.getElementById('toast');
       const toastMessage = document.getElementById('toast-message');
       
       toastMessage.textContent = message;
       toast.className = `toast ${type}`;
       toast.classList.add('show');
       
       // Update icon based on type
       const icon = toast.querySelector('i');
       if (type === 'success') {
         icon.setAttribute('data-lucide', 'check-circle');
         icon.className = 'w-6 h-6 text-green-500';
       } else {
         icon.setAttribute('data-lucide', 'x-circle');
         icon.className = 'w-6 h-6 text-red-500';
       }
       lucide.createIcons();
       
       // Hide after 3 seconds
       setTimeout(() => {
         toast.classList.remove('show');
       }, 3000);
     }
 
     // Tab management
     function showTab(tab) {
       // Update tab buttons
       
       register_container.classList.add('hidden');
       document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
       document.getElementById(`tab-${tab}`).classList.add('active');
       about_container.classList.remove('hidden');
       // Update tab content
       document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
       document.getElementById(`content-${tab}`).classList.add('active');
 
       if (tab === 'register') {
         // Fetch latest events from the server before rendering
         fetchEvents();
       }
     }
 
     // User menu
     function toggleUserMenu() {
       const dropdown = document.getElementById('user-dropdown');
       dropdown.classList.toggle('show');
     }
 
     function logout() {
       alert('Logging out...');
     }
 
     // Close user menu when clicking outside
     document.addEventListener('click', (e) => {
       if (!e.target.closest('.user-menu')) {
         document.getElementById('user-dropdown').classList.remove('show');
       }
     });
 
     // FAQ toggle
     function toggleFaq(element) {
       const answer = element.nextElementSibling;
       const icon = element.querySelector('i');
       
       if (answer.style.maxHeight) {
         answer.style.maxHeight = null;
         icon.style.transform = 'rotate(0deg)';
       } else {
         answer.style.maxHeight = answer.scrollHeight + 'px';
         icon.style.transform = 'rotate(180deg)';
       }
     }
 
     // Event management
     function toggleEventExpansion(eventId) {
       const eventCard = document.getElementById(`event-${eventId}`);
       
       if (expandedEvent === eventId) {
         eventCard.classList.remove('expanded');
         expandedEvent = null;
       } else {
         // Close previously expanded event
         if (expandedEvent) {
           document.getElementById(`event-${expandedEvent}`).classList.remove('expanded');
         }
         
         eventCard.classList.add('expanded');
         expandedEvent = eventId;
       }
     }
 
     // Utility: generate UUID v4 (36 chars). Uses crypto.randomUUID when available.
     function generateUUID() {
       if (typeof crypto !== 'undefined' && crypto.randomUUID) return crypto.randomUUID();
       // fallback
       return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
         const r = Math.random() * 16 | 0;
         const v = c === 'x' ? r : (r & 0x3 | 0x8);
         return v.toString(16);
       });
     }
 
     // Collect and validate registration form according to schema:
     // reg_id char(36), event_id int, name varchar(300), school varchar(300),
     // DOB date, grade varchar(50), contact_details char(50)
    function collectAndValidateRegistration(formElement) {
      const fd = new FormData(formElement);
      const errors = [];

      const values = {
        reg_id: (fd.get('reg_id') || '').toString().trim() || generateUUID(),
        event_id: selectedEvent ? parseInt(selectedEvent.id, 10) : NaN,
        user_name: (fd.get('name') || '').toString().trim(),
        user_school: (fd.get('school') || '').toString().trim(),
        user_dob: (fd.get('dob') || '').toString().trim(),
        user_grade: (fd.get('grade') || '').toString().trim(),
        user_contact_details: (fd.get('contact_details') || '').toString().trim()
      };

      // event_id must be integer
      if (!Number.isInteger(values.event_id)) errors.push('Invalid event id.');

      // name and school: required, max 300
      if (!values.user_name) errors.push('Name is required.');
      else if (values.user_name.length > 300) errors.push('Name must be <= 300 chars.');

      if (!values.user_school) errors.push('School is required.');
      else if (values.user_school.length > 300) errors.push('School must be <= 300 chars.');

      // DOB: required and valid date (YYYY-MM-DD). convert to ISO date string for storage
      if (!values.user_dob) {
        errors.push('Date of Birth is required.');
      } else {
        const isoMatch = values.user_dob.match(/^(\d{4})-(\d{2})-(\d{2})$/);
        const d = new Date(values.user_dob);
        if (!isoMatch || isNaN(d.getTime())) {
          errors.push('Date of Birth must be a valid date (YYYY-MM-DD).');
        } else {
          values.user_dob = d.toISOString().slice(0, 10);
        }
      }

      // grade: required, max 50
      if (!values.user_grade) errors.push('Grade is required.');
      else if (values.user_grade.length > 50) errors.push('Grade must be <= 50 chars.');

      // user_contact_details: required, max 50
      if (!values.user_contact_details) errors.push('Contact details are required.');
      else if (values.user_contact_details.length > 50) errors.push('Contact details must be <= 50 chars.');

      return {
        valid: errors.length === 0,
        errors,
        values
      };
    }

    // Open registration modal and populate reg_id + selectedEvent
    function openRegistrationModal(eventId) {
      // find event (allow numeric/string id)
      selectedEvent = events.find(e => String(e.id) === String(eventId)) || null;
      if (!selectedEvent) return;

      const modal = document.getElementById('registration-modal');
      if (!modal) return;

      // populate event name and a reg_id by default
      const nameEl = document.getElementById('modal-event-name');
      if (nameEl) nameEl.textContent = selectedEvent.name || '';

      const rid = generateUUID();
      const ridInput = document.getElementById('reg-id');
      if (ridInput) ridInput.value = rid;

      // open modal
      modal.classList.add('show');
    }

    // Close registration modal and reset form (keeps page stable)
    function closeModal() {
      const modal = document.getElementById('registration-modal');
      if (!modal) return;
      modal.classList.remove('show');
      const form = document.getElementById('registration-form');
      if (form) form.reset();
      const ridInput = document.getElementById('reg-id');
      if (ridInput) ridInput.value = '';
      selectedEvent = null;
    }

    // Close the result modal
    function closeResultModal() {
      const modal = document.getElementById('result-modal');
      if (!modal) return;
      modal.classList.remove('show');
      modal.setAttribute('aria-hidden', 'true');
    }

    // Initialize the page
     document.addEventListener('DOMContentLoaded', () => {
      loadRegisteredFromCookie();
      showTab('about');
       
       // Initialize FAQ items
       document.querySelectorAll('.faq-answer').forEach(answer => {
         answer.style.maxHeight = null;
       });
     });

    // --- Added: submit handler + result modal helper ---
    function showResultModal(title, message, success = true) {
      const modal = document.getElementById('result-modal');
      const icon = document.getElementById('result-icon');
      const titleEl = document.getElementById('result-title');
      const msgEl = document.getElementById('result-message');
      if (!modal || !icon || !titleEl || !msgEl) return;

      titleEl.textContent = title || (success ? 'Success' : 'Error');
      msgEl.textContent = message || '';

      icon.className = success
        ? 'w-16 h-16 rounded-full bg-green-100 text-green-600 flex items-center justify-center mx-auto mb-4'
        : 'w-16 h-16 rounded-full bg-red-100 text-red-600 flex items-center justify-center mx-auto mb-4';
      icon.innerHTML = success ? '<i data-lucide="check-circle" class="w-8 h-8"></i>' : '<i data-lucide="x-circle" class="w-8 h-8"></i>';
      lucide.createIcons();

      modal.classList.add('show');
      modal.removeAttribute('aria-hidden');
    }

    // Submit registration form -> POST to register route
    document.getElementById('registration-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const form = e.target;
      const submitBtn = document.getElementById('submit-button');
      const { valid, errors, values } = collectAndValidateRegistration(form);

      if (!valid) {
        showResultModal('Validation error', errors.join('\n'), false);
        return;
      }

      // small UI feedback
      const previousBtnHtml = submitBtn.innerHTML;
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<span class="loading-spinner"></span> Registering...';

      try {
        // Adjust endpoint as needed; currently posts to relative admin register route
        const resp = await fetch('/api/event/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(values)
        });

        let data = null;
        try { data = await resp.json(); } catch (_) { /* ignore json parse errors */ }

        if (resp.ok) {
          // mark the event as registered in a cookie and update UI
          const existing = readRegisteredCookie();
          existing.push(String(values.event_id));
          const unique = Array.from(new Set(existing));
          document.cookie = `zync_registered=${encodeURIComponent(JSON.stringify(unique))}; path=/; max-age=${60 * 60 * 24 * 365}`;

          loadRegisteredFromCookie();
          renderEvents();

          showResultModal('Registration successful', (data && data.message) || 'You are registered for the event.', true);
        } else {
          const msg = (data && (data.message || data.error)) || `Server error (${resp.status})`;
          showResultModal('Registration failed', msg, false);
        }
      } catch (err) {
        console.error('registration error', err);
        showResultModal('Registration failed', 'Network error. Please try again.', false);
      } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = previousBtnHtml;
        form.reset();
        closeModal();
      }
    });
  </script>
</body>
</html>